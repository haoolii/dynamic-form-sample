<div class="app-container">
  <!-- å·¦å´ tab -->
  <div class="sidebar">
    @for (m of meta(); track $index) {
      <div
        class="tab"
        [class.active]="activeIndex() === $index"
        (click)="activeIndex.set($index)"
      >
        {{ m.label }}
        <span class="status">
          {{ m.enabled ? 'âœ…' : 'ðŸš«' }}
          <span *ngIf="m.edited" class="dot"></span>
        </span>
      </div>
    }

    <button (click)="addTab()">ï¼‹ æ–°å¢žç¾¤çµ„</button>
  </div>

  <!-- å³å´ form -->
  <div class="content" *ngIf="currentForm() as form">
    <form [formGroup]="form">
      <div>
        <label>å•Ÿç”¨ï¼š</label>
        <input type="checkbox" formControlName="enabled" />
      </div>

      <hr />

      <div formArrayName="users">
        <h4>ä½¿ç”¨è€…åˆ—è¡¨</h4>
        @for (u of currentUsers.controls; track $index) {
          <div [formGroupName]="$index" class="user-row">
            <input placeholder="Name" formControlName="name" />
            <input placeholder="Email" formControlName="email" />
            <button type="button" (click)="removeUser($index)">ðŸ—‘</button>
          </div>
        }
      </div>

      <button type="button" (click)="addUser()">ï¼‹ æ–°å¢žä½¿ç”¨è€…</button>
    </form>

    <div class="actions">
      <button (click)="save(activeIndex())">ðŸ’¾ å„²å­˜</button>
      <button (click)="removeTab(activeIndex())" [disabled]="formArray.length <= 1">
        ðŸ—‘ åˆªé™¤ç¾¤çµ„
      </button>
    </div>
  </div>
</div>

<hr />

<div class="footer">
  <button (click)="submitAll()">ðŸ“¤ Submit All</button>
  <button (click)="exit()">ðŸšª Exit</button>
</div>

<pre>
  {{ formArray.value | json }}
</pre>
